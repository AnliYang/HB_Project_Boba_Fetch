{% extends 'base.html' %}
{% block head %}
  <script src='https://api.tiles.mapbox.com/mapbox.js/v2.2.4/mapbox.js'></script>
  <link href='https://api.tiles.mapbox.com/mapbox.js/v2.2.4/mapbox.css' rel='stylesheet' />
  <style>
    .mapbox { position:absolute; top:0; bottom:0; width:100%; margin-top:60px;}
  </style>
{% endblock %}

{% block content %}
<!-- <div class="container">
    <h2 id="results-title">Boba Near You <small>({{ restaurants|length }} results <img class="yelp-logo" src="static/yelp_powered.png">)</small></h2>
    <div id="results" data-restaurants="{{ restaurants }}">
        {% if restaurants %}
            {% for restaurant in restaurants %}
            {% if loop.index is divisibleby 4 %}
            <div class="row">
            {% endif %}
                <div class="col-xs-3 restaurant">
                    <div class="thumbnail">
                        <div><img src={{ restaurant.image_url }} class="img-circle img-restaurant" alt="restaurant image"></div>
                        <div class="caption">
                            <h3><div class="restaurant-name">{{ restaurant.name }}</div></h3>
                            <p class="rating-and-reviews">
                                <span class="rating">{{ restaurant.rating }}</span><span class="fa fa-star rating-star" aria-hidden="true"></span>
                                <span class="reviews">{{ restaurant.review_count }}</span><i class="fa fa-users reviews-users"></i>
                            </p>
                            <address>
                                <div>{{ restaurant.street1 }}</div>
                                <div>{{ restaurant.city }}, {{ restaurant.state }} {{ restaurant.zip5 }}</div>
                            </address>
                            <div>
                                <form action="/map" method="POST">
                                    <input type="hidden" name="yelp-id" value="{{ restaurant.yelp_location_id }}">
                                    <input type="hidden" name="user-address" value="{{ user_address }}">
                                    <input type="hidden" name="user-lat" value="{{ user_latitude }}">
                                    <input type="hidden" name="user-lng" value="{{ user_longitude }}">
                                    <input type="hidden" name="run-speed" value="{{ running_speed }}">
                                    <div class="btn-group">
                                        <button type="submit" class="btn btn-primary">
                                            <span class="glyphicon glyphicon-map-marker" aria-hidden="true"></span>
                                            Map It!
                                        </button>
                                        <a href="{{ restaurant.yelp_url }}" class="btn btn-warning"><i class="fa fa-yelp"></i> Read reviews!
                                        </a>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            {% if loop.index is divisibleby 4 %}
            </div>
            {% endif %}
            {% endfor %}
        {% endif %}
    </div>
</div> -->
<div id='map_geo' class='mapbox' data-user-lat="{{ user_latitude }}" data-user-lng="{{ user_longitude }}" data-restaurant-ids="{{ restaurant_ids }}" data-feature-collection="{{ feature_collection }}"> </div>

<script src="static/js/results.js"></script>

{% endblock %}
